<!DOCTYPE html>
<html>
<head lang="en">
    <meta charset="UTF-8">
    <title>Visual Composer</title>
    <link href="css/bootstrap.min.css" rel="stylesheet" media="all" type="text/css"/>
    <link href="css/bootstrap-theme.min.css" rel="stylesheet" media="all" type="text/css"/>
    <link href="css/custom.css" rel="stylesheet" media="all" type="text/css"/>
    <script src="js/jquery-2.1.3.min.js"></script>
    <script src="js/bootstrap.min.js"></script>
    <script src="js/d3.v3.min.js"></script>
    <script src="js/custom.js"></script>
    <script src="js/live.js"></script>

</head>
<body>

<div class="container">

    <div class="row">
        <!--Nav Bar goes here-->
        <!--<div class="col-md-12">-->
        <nav class="navbar navbar-default" role="navigation">
            <div class="navbar-header">
                <a class="navbar-brand" href="#"><span class="glyphicon glyphicon-home"></span></a>
            </div>
            <div>
                <ul class="nav navbar-nav">
                    <li class="active"><a href="#">File</a></li>
                    <li><a href="#">Edit</a></li>
                </ul>
            </div>
        </nav>
        <!--</div>-->
    </div>

    <div class="row">
        <!--sidebar goes here-->
        <div class="col-md-3">

            <!-- operators goes here -->
            <div class="row" id="operators">
                <div class="panel panel-default">
                    <div class="panel-heading draggable">Operators</div>
                    <!--<div class="panel-body">-->
                    <div>
                        <div class="iii">
                            <svg id="icons" height="200" width="270"></svg>

                            <script type="text/javascript">


                                var imagesObjects = ["1.png","2.png","3.png","4.png","6.png","3.png","4.png","6.png","1.png","2.png","3.png","4.png","6.png","1.png","2.png"];

                                var W = 270; var H=200;
                                var x = 25, y=25, w=35, h=40;

                                n = Math.round((W-x)/(w+x));
                                m = Math.round((H-y)/(h+y));
                                //                                n = ((W-x)/(w+x));
                                //                                m = ((H-y)/(h+y));

                                console.log("n="+n);
                                console.log("m="+m);
                                var coordinates = [];
                                var row = 0, col=0;
                                for(i=0; i<imagesObjects.length; i++){


                                    x_i = (col+1)*x + col*x;
                                    y_i = (row+1)*y + row*y;
                                    alpha = [x_i, y_i];

                                    coordinates.push(alpha);
                                    col+=1;

                                    if(col==n){
                                        row+=1;
                                        col=0
                                    }


                                }

                                console.log(coordinates);

                                function mover () {
                                    d3.select('image')
                                            .attr("x", d3.event.x - parseInt(d3.select('image').attr("width")) / 2)
                                            .attr("y", d3.event.y - parseInt(d3.select('image').attr("height")) / 2);
                                }



                                function move() {
                                    d3.select(this)
//                                            .attr("transform", "translate(" + d3.event.x + "," + d3.event.y + ")");
                                            .attr('x', d3.event.x - parseInt(d3.select(this).attr("width")) / 2)
                                            .attr('y', d3.event.y - parseInt(d3.select(this).attr("height")) / 2)
                                }

                                var drag = d3.behavior.drag()
                                        .on("drag", move);
                                var iconsArea = d3.select("#icons").selectAll("image")

                                                .data(imagesObjects)
                                                .enter()
                                                .append("svg:image")
//                                        .append("rect")
                                                .attr("xlink:href", function(d){
//                                            console.log(d);
                                                    return "images/"+d;
                                                })
                                                .attr('class','drg')
                                                .attr("width", w)
                                                .attr("height", h)
                                                .attr("x", function(d, i){
                                                    return coordinates[i][0];
//                                            console.log(i);
//                                            return i*10;
                                                })
                                                .attr("y",function(d, i){
                                                    return coordinates[i][1];
//                                            return i*10;
                                                }).call(drag)
                                        ;





                            </script>

                        </div>

                    </div>
                </div>

            </div>

            <!--input/output nodes goes here-->
            <div class="row" id="io-nodes">
                <div class="panel panel-default">
                    <div class="panel-heading">IO Nodes</div>
                    <div class="panel-body">

                        <svg width="250" height="250" style="background-color: transparent">
                            <g>
                                <line x1="0" y1="0" x2="0" y2="80" stroke="#000" stroke-width="2" />
                                <rect height="10" width="20" x="0" y="0" style="background-color: #204d74"></rect>
                                <rect height="10" width="20" x="0" y="80" style="background-color: #204d74"></rect>

                                <g>
                                    <line x1="20" y1="20" x2="20" y2="50" stroke="#000" stroke-width="2" />

                                    <g>
                                        <rect height="10" width="20" x="20" y="20" style="background-color: #204d74"></rect>
                                        <text x="40" y="30" fill="red" font-size="10px">Stream A</text>
                                    </g>

                                    <g>
                                        <rect height="10" width="20" x="20" y="40" style="background-color: #204d74">Stream B</rect>
                                        <text x="40" y="50" fill="red" font-size="10px">Stream B</text>
                                    </g>
                                </g>




                            </g>
                        </svg>

                        <script type="text/javascript">
                            var boxWidth = 600;
                            var boxHeight = 400;

                            var box = d3.select('body')
                                    .append('svg')
                                    .attr('class', 'box')
                                    .attr('width', boxWidth)
                                    .attr('height', boxHeight);

                            var drag = d3.behavior.drag()
                                    .on('dragstart', function() { circle.style('fill', 'red'); })
                                    .on('drag', function() { circle.attr('x', d3.event.x)
                                            .attr('y', d3.event.y); })
                                    .on('dragend', function() { circle.style('fill', 'black'); });

                            var circle = d3.selectAll('.draggable')
                                    .call(drag)
                                    .style('fill', 'black');


                        </script>
                    </div>
                </div>

            </div>

        </div>

        <!--canvas area-->
        <div class="col-md-9" id="canvas">

            <div class="panel panel-default">
                <div class="panel-heading">Canvas</div>
                <div class="panel-body">
                    <ul>
                        <li>Item Y</li>
                        <li>Item</li>
                        <li>Item</li>
                        <li>Item</li>
                        <li>Item</li>
                        <li>Item</li>
                        <li>Item</li>
                        <li>Item</li>
                        <li>Item</li>
                        <li>Item</li>
                        <li>Item</li>
                    </ul>

                </div>
            </div>

        </div>

    </div>

</div>




</body>
</html>